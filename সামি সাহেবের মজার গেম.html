<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>সামি সাহেবের মজার গেম</title>
<style>
body {
  margin: 0;
  font-family: sans-serif;
  background: linear-gradient(#111, #222);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
  color: #fff;
}
canvas {
  border: 2px solid #333;
  background: #111;
  display: block;
}
button {
  margin-top: 10px;
  padding: 10px 20px;
  font-size: 18px;
  cursor: pointer;
  border-radius: 8px;
  border: none;
  background-color: #d32f2f;
  color: white;
}
button:hover { background-color: #ff4545; }
</style>
</head>
<body>

<h2>সামি সাহেবের মজার গেম</h2>
<canvas id="gameCanvas" width="800" height="250"></canvas>
<div>
  <button id="jumpBtn">Jump</button>
  <button id="restartBtn">Restart</button>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const jumpBtn = document.getElementById('jumpBtn');
const restartBtn = document.getElementById('restartBtn');

let gravity = 0.6;
let score = 0;
let gameSpeed = 3;
let gameOver = false;

// Dino
const dino = {
  x: 50,
  y: 180,
  width: 40,
  height: 40,
  dy: 0,
  jumpPower: 12,
  grounded: true,
  isJumping: false,
  jumpStartTime: 0,
  jump() {
    if(this.grounded){
      this.dy = -this.jumpPower;
      this.grounded = false;
      this.isJumping = true;
      this.jumpStartTime = Date.now();
    }
  },
  holdJump() {
    if(this.isJumping){
      const holdTime = Date.now() - this.jumpStartTime;
      if(holdTime < 400) this.dy -= 0.15; // long jump
    }
  },
  update() {
    this.holdJump();
    this.dy += gravity;
    this.y += this.dy;
    if(this.y >= 180){
      this.y = 180;
      this.dy = 0;
      this.grounded = true;
      this.isJumping = false;
    }
  },
  draw() {
    ctx.fillStyle = "#eee";
    ctx.fillRect(this.x, this.y, this.width, this.height);
  }
};

// Obstacles
let obstacles = [];
function createObstacle() {
  const height = Math.random() * 30 + 20;
  const obstacle = { x: canvas.width, y: 180 + 40 - height, width: 20, height: height };
  obstacles.push(obstacle);
}

// Clouds
let clouds = [];
function createCloud() {
  const y = Math.random() * 50 + 20;
  clouds.push({ x: canvas.width, y: y, width: 60, height: 20 });
}

// Collision
function checkCollision(ob) {
  return (
    dino.x < ob.x + ob.width &&
    dino.x + dino.width > ob.x &&
    dino.y < ob.y + ob.height &&
    dino.y + dino.height > ob.y
  );
}

// Restart
function restart() {
  obstacles = [];
  clouds = [];
  score = 0;
  gameSpeed = 3;
  gameOver = false;
  dino.y = 180;
  dino.dy = 0;
  dino.grounded = true;
  dino.isJumping = false;
  update(); // restart game loop
}

// Game loop
let obstacleTimer = 0;
let cloudTimer = 0;

function update(){
  if(gameOver){
    ctx.fillStyle = "#ff5555";
    ctx.font = "30px sans-serif";
    ctx.fillText("Game Over! Press Restart", 200, 100);
    return;
  }

  ctx.clearRect(0,0,canvas.width,canvas.height);
  
  // Sky
  ctx.fillStyle = "#111";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Clouds
  cloudTimer++;
  if(cloudTimer > 150){
    createCloud();
    cloudTimer = 0;
  }
  clouds.forEach((c,i) => {
    ctx.fillStyle = "#888";
    ctx.fillRect(c.x, c.y, c.width, c.height);
    c.x -= gameSpeed/2;
    if(c.x + c.width < 0) clouds.splice(i,1);
  });

  // Ground
  ctx.fillStyle = "#333";
  ctx.fillRect(0,220,canvas.width,10);

  // Dino
  dino.update();
  dino.draw();

  // Obstacles
  obstacleTimer++;
  if(obstacleTimer > 90){
    createObstacle();
    obstacleTimer = 0;
  }

  obstacles.forEach((ob,i)=>{
    ctx.fillStyle = "#ff3333";
    ctx.fillRect(ob.x, ob.y, ob.width, ob.height);
    ob.x -= gameSpeed;
    if(checkCollision(ob)) gameOver = true;
    if(ob.x + ob.width < 0){
      obstacles.splice(i,1);
      score++;
      if(score % 5 === 0) gameSpeed += 0.5;
    }
  });

  // Score
  ctx.fillStyle = "#fff";
  ctx.font = "20px sans-serif";
  ctx.fillText("Score: " + score, 650, 30);

  requestAnimationFrame(update);
}

// Button events
let jumpInterval;
jumpBtn.addEventListener('mousedown', () => { if(!gameOver) { dino.jump(); jumpInterval = setInterval(()=>dino.holdJump(),16); } });
jumpBtn.addEventListener('mouseup', () => { clearInterval(jumpInterval); });
jumpBtn.addEventListener('mouseleave', () => { clearInterval(jumpInterval); });
jumpBtn.addEventListener('touchstart', (e) => { e.preventDefault(); if(!gameOver){ dino.jump(); jumpInterval = setInterval(()=>dino.holdJump(),16); } });
jumpBtn.addEventListener('touchend', () => { clearInterval(jumpInterval); });

restartBtn.addEventListener('click', restart);

update();
</script>

</body>
</html>
